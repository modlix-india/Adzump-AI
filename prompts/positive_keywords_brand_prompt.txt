<role>You are a Google Ads specialist selecting BRAND-focused keywords from real Google Ads data.</role>

<business_context>
**Brand:** {brand_name}
**Industry:** {business_type}
**Location:** {primary_location}
**Service Areas:** {service_areas}
**Features:** {unique_features}
</business_context>

<available_data>
{keywords_text}
</available_data>

<mission>
Select EXACTLY {target_count} brand-focused keywords from the provided data.
</mission>

---

# NON-NEGOTIABLE RULES

## 1. BRAND-FOCUSED SELECTION (Partial Match Allowed)

<brand_matching_rules>
**If {brand_name} is a SINGLE WORD** (e.g., "Nike"):
- Keyword MUST contain the exact brand name

**If {brand_name} is MULTI-WORD** (e.g., "Valmark Cityville"):
- Keyword MUST contain AT LEAST ONE significant word from the brand name
- Significant words = nouns, proper nouns (exclude: "the", "and", "a", "an", "of")

**Examples for {brand_name} = "Valmark Cityville":**
<accept> "valmark apartments" (has "valmark")</accept>
<accept> "cityville homes" (has "cityville")</accept>
<accept> "valmark cityville villas" (has both)</accept>
<accept> "buy valmark property" (has "valmark")</accept>

<reject>✗ "luxury apartments bangalore" (no brand component)</reject>
<reject>✗ "3 bhk near me" (no brand component)</reject>

**Selection Rule:**
- Extract significant words from {brand_name} (split by spaces, remove common words)
- For each keyword, check if it contains ANY of these significant brand words
- If yes → eligible for selection
- If no → automatically reject
</brand_matching_rules>

<critical>
No exceptions - every keyword must have at least one significant brand word. This is a brand-protection campaign.
Select from provided data only - do not invent keywords.
</critical>

---

## 2. EXACT KEYWORD MATCHING

<matching_rules>
- Use EXACT keyword text from provided data
- Do not modify or alter keyword phrasing
- Preserve original capitalization and formatting
</matching_rules>

---

# MANDATORY FIRST KEYWORD

<position_one>
**Position 1 MUST BE:**
Select the brand name keyword (containing all brand components) as the first keyword with PHRASE match.
This is mandatory for brand protection.

Example: If brand = "Valmark Cityville", first keyword should be "valmark cityville" with PHRASE match.
</position_one>

---

# SELECTION STRATEGY

<priority_order>
After mandatory first keyword, prioritize in this order:

**1. Brand Name Variations (Critical)**
- Variations of the brand name (e.g., "subha terra tones", "subha white waters")
- **For long brands (4+ words)**: ALSO include standalone partials (e.g., "white waters", "terra tones")
- **Select these REGARDLESS of volume** (even if 0 or low volume)
- These are the core assets we must protect.

**2. High-Volume Brand Terms** (volume ≥ 10, 2-4 words)

**3. Brand + Service Area Combinations**
- ONLY select keywords with locations from {service_areas}
- EXCLUDE keywords with locations NOT in {service_areas}

**4. Brand + Intent Keywords**
- Reviews, contact, price, booking, appointment, etc.

**5. Brand Misspellings**
- Common typos of brand name components

**6. Zero-Volume Brand Protection**
- Simple 2-4 word brand keywords
</priority_order>

---

# FILTERING RULES

<reject_these>

## RULE 1: Keywords Longer Than 5 Words
Reject any keyword with more than 5 words.

## RULE 2: Ultra-Specific Technical Details
<reject>
- Percentages, measurements, specifications
- Technical jargon, model numbers
- Industry-specific codes or certifications
</reject>

## RULE 3: Wrong Industry Terms
<reject>
Generic business terms that don't match {business_type}
Examples: "emergency services", "professional services", "quality assurance" (unless relevant to industry)
</reject>

## RULE 4: Wrong Geographic Locations
<location_validation>
- Analyze {service_areas} carefully
- ONLY include keywords with locations explicitly listed in {service_areas}
- REJECT keywords with locations NOT in {service_areas}
</location_validation>

<note>
**Feature/Amenity Keywords in Brand Campaigns:**

For brand campaigns, if a keyword contains brand components (per Rule #1), it is valid even if it mentions specific features or amenities.

Why? "Valmark pool villas" is someone searching for VALMARK's villas with pools, not generic pool villas. The brand presence makes it brand-focused.

The 5-word limit (Rule 1) already prevents overly specific feature combinations.

Only reject if:
- NO brand component present (handled by Brand Rule #1)
- Too long (>5 words)
</note>

</reject_these>

---

# MATCH TYPE ASSIGNMENT

<match_type_philosophy>
Assign match types based on keyword characteristics and brand intent, NOT fixed positions.

Analyze each keyword (except Position 1) and assign the appropriate match type based on its:
- Specificity level (word count, detail)
- Search intent (discovery vs conversion)
- Brand protection priority
- Query expansion potential
</match_type_philosophy>

<target_distribution>
**Aim for approximately:**
- Position 1: PHRASE match (mandatory - full brand name)
- Remaining keywords: ~80-90% PHRASE, ~10-20% EXACT

But prioritize correct match type assignment over hitting exact percentages.
Quality of assignment matters more than rigid distribution.
</target_distribution>

---

<assignment_criteria>
Analyze each keyword and assign match type based on these criteria:

## POSITION 1 - MANDATORY PHRASE MATCH
<position_one_rule>
**Position 1 MUST BE:**
Full brand name keyword with PHRASE match (non-negotiable for brand protection)

Example: "valmark cityville" → PHRASE match
</position_one_rule>

---

## PHRASE MATCH [~80-90% of remaining keywords]

<when_to_use_phrase>
**Assign PHRASE match when:**

1. **Brand Discovery:** High-volume brand + location/product searches
2. **Brand Protection:** Misspellings, variations, zero-volume brand terms
3. **Moderate Specificity:** 2-3 words with some context
4. **Intent Keywords:** Brand + reviews, contact, price, booking, etc.
5. **Service Areas:** Brand + location combinations from {service_areas}
6. **Default Choice:** When uncertain, prefer Phrase for brand keywords

**Keyword Characteristics:**
- 2-3 words with moderate detail
- Brand + location/intent/product combinations
- Common brand searches
- Brand protection terms
- Most brand keywords should land here

**Examples:**
- "valmark bangalore", "cityville villas"
- "valmark cityville reviews", "cityville near me"
- "valmark apartments", "cityville price"
- "valmark contact", "cityville location"

**This is your default match type** for brand keywords. When in doubt, use Phrase.
</when_to_use_phrase>

---

## EXACT MATCH [~10-20% of remaining keywords]

<when_to_use_exact>
**Assign EXACT match when:**

1. **High Precision Needed:** Very specific, conversion-focused brand searches
2. **Complete Intent:** 4-5 words capturing full search intent
3. **Critical Variations:** Brand variations you must own with zero expansion
4. **High-Value Terms:** Critical conversion keywords worth exact targeting
5. **Maximum Control:** Need to prevent any query expansion

**Keyword Characteristics:**
- Very specific (4-5 words)
- Complete search intent captured
- High conversion potential
- Critical brand variations
- No query expansion desired

**Examples:**
- "buy valmark villa whitefield"
- "valmark cityville 3 bhk price"
- "valmark apartments sarjapur price"
- "cityville villas for sale bangalore"

**Use for precision targeting** where you want zero query expansion.
</when_to_use_exact>

</assignment_criteria>

---

<decision_process>
## MATCH TYPE DECISION PROCESS

**For Position 1:**
- ALWAYS assign PHRASE match (mandatory brand protection rule)

**For Each Remaining Keyword, Ask These Questions:**

**1. How specific is it?**
- 2-3 words, moderate detail → PHRASE
- 4-5 words, very specific → EXACT

**2. What's the search intent?**
- Discovery/awareness/consideration → PHRASE
- Ready to convert (with price, buy, sale terms) → EXACT

**3. How critical is brand protection?**
- Standard brand search → PHRASE
- Critical exact variation you must own → EXACT

**4. How much query expansion is beneficial?**
- Some expansion helpful (more reach) → PHRASE
- No expansion wanted (precision only) → EXACT

**5. Is it high-value/conversion-focused?**
- General brand search → PHRASE
- High-intent conversion term → EXACT
</decision_process>

---

<strategic_guidelines>
## STRATEGIC MATCH TYPE GUIDELINES

**POSITION 1 = Brand Protection (Mandatory PHRASE)**
- Full brand name keyword
- Non-negotiable rule
- Ensures brand visibility

**PHRASE = Workhorse**
- Your default choice (~80-90% of remaining keywords)
- Balances reach and control for brand terms
- Most brand keywords should land here
- Safe choice when uncertain

**EXACT = Sniper Rifle**
- Use for precision (~10-20% of remaining keywords)
- High-intent, specific brand searches
- Maximum control, minimum waste
- Worth it for critical brand variations

<critical>
**Key Principles:**

- Position 1 is ALWAYS PHRASE (mandatory)
- Think strategically - match type should serve the keyword's purpose
- PHRASE = Default workhorse for brand keywords
- EXACT = Precision targeting for specific, high-value brand searches
- Aim for ~80-90% PHRASE and ~10-20% EXACT distribution (excluding Position 1)
</critical>
</strategic_guidelines>

---

# QUALITY VALIDATION

<validation_checklist>
For each selected keyword, verify:

1. Contains at least one significant word from "{brand_name}"?
2. From provided data (not invented)?
3. 2-5 words maximum?
4. Location matches {service_areas} (if location mentioned)?
5. Match type assigned intelligently based on keyword characteristics?
6. Position 1 uses PHRASE match for full brand name?
7. Not overly technical or specific?
</validation_checklist>

---

# OUTPUT REQUIREMENTS

<output_format>
Return ONLY valid JSON:

{{
    "keywords": [
        {{
            "keyword": "exact text from data",
            "match_type": "exact|phrase",
            "is_cross_business": false,
            "rationale": "concise reason for selection AND match type choice"
        }}
    ]
}}


<requirements>
- Position 1 MUST be full brand name keyword with PHRASE match
- Select EXACTLY {target_count} keywords
- All from provided data only
- Match types assigned intelligently based on keyword characteristics (NOT positions)
- Aim for ~80-90% PHRASE and ~10-20% EXACT distribution
- Valid JSON only
- No explanations outside JSON structure
- Rationale should explain BOTH selection reason AND match type reasoning
</requirements>
</output_format>

---

# CRITICAL REMINDERS

<final_reminders>
1. **Partial brand matching allowed** - at least one significant brand word required
2. **Position 1 mandatory** - full brand name with PHRASE match
3. **5-word maximum** - reject longer keywords
4. **Location validation** - ONLY use locations from {service_areas}
5. **Intelligent match type assignment** - analyze each keyword's characteristics, NOT position
6. **Match type rationale** - explain WHY you chose Phrase or Exact for each keyword
7. **Features are OK** - if brand is present, feature mentions don't disqualify keyword
8. **From data only** - never invent keywords not in provided data
</final_reminders>

<closing>
Brand campaigns protect your name with simple, searchable keywords. If the brand is present, the keyword is brand-focused.
</closing>
